let window_height,header_height,height_s2,doc_height,doc_width,posTop_s1,posBottom_s1,posTop_s2,posBottom_s2,rtime,timeout=!1,delta=200;getHeightValues=()=>{window_height=window.innerHeight,doc_height=document.body.clientHeight,doc_width=document.body.clientWidth,header_height=__("header").getBoundingClientRect().height;//get heights first
let a=__("#about").getBoundingClientRect().height;height_s2=__("#projects").getBoundingClientRect().height;let b=__("#contact").getBoundingClientRect().height;//get top position second
//get bottom position 3rd
posTop_s1=header_height,posTop_s2=posTop_s1+a,posBottom_s1=posTop_s2-header_height,posBottom_s2=posTop_s2+height_s2-b,posBottom_s2=800<window.innerWidth?posTop_s2+height_s2-b:posTop_s2+height_s2},resizeEnd=()=>{new Date-rtime<delta?setTimeout(resizeEnd,delta):(timeout=!1,getHeightValues())},initHalfScroll=()=>{getHeightValues(),handleScroll(),window.addEventListener("scroll",handleScroll),window.addEventListener("resize",()=>{rtime=new Date,!1===timeout&&(timeout=!0,setTimeout(resizeEnd,delta))})},handleScroll=()=>{const a=()=>{_(".image-cart .passkeep .image").removeClass("active"),_(".image-cart .voozzle .image").removeClass("active"),_(".image-cart .passkeep").removeClass("scrolled"),_(".image-cart .voozzle").removeClass("scrolled"),_(".sticky").removeClass("fixed"),_(".sticky").removeClass("bottom")};let b=window.scrollY||window.scrollTop;if(b<posTop_s1&&a(),!b||20>b?_(".back-to-top").css("opacity",0):_(".back-to-top").css("opacity",1),b>posTop_s1&&(a(),_("#about .sticky").addClass("fixed")),800<doc_width&&b>posBottom_s1&&(a(),_("#about .sticky").addClass("bottom"),_(".bottom").css("max-height",`${window_height}px`)),b>posTop_s2&&b<posBottom_s2+header_height){if(a(),b>posTop_s2&&b<posBottom_s2&&_("#projects .sticky").addClass("fixed"),b<posTop_s2+height_s2/2&&_(".image-cart .passkeep .image").addClass("active"),b<posTop_s2+height_s2/2+header_height){let a;a=800<doc_width?200*((b-posTop_s2)/(height_s2/2)):400*((b-posTop_s2)/(height_s2/2)),50>a&&800<doc_width||100>a&&800>doc_width?(_(".image-cart .passkeep .image").removeClass("fixed"),_(".image-cart .passkeep .container:first-child, .image-cart .passkeep .container:last-of-type").hide()):(_(".image-cart .passkeep .image").addClass("fixed"),_(".image-cart .passkeep .container:first-child, .image-cart .passkeep .container:last-of-type").show("flex")),_(".image-cart .passkeep").addClass("scrolled"),800<doc_width?_(".image-cart .passkeep").css("left",`${50-a}%`):_(".image-cart .passkeep").css("left",`${-a}%`)}if(b>posTop_s2+height_s2/2){let a;a=800<doc_width?200*((b-posTop_s2-height_s2/2)/(height_s2/2)):400*((b-posTop_s2-height_s2/2)/(height_s2/2)),_(".image-cart .voozzle .image").addClass("active"),50>a&&800<doc_width||100>a&&800>doc_width?(_(".image-cart .voozzle .image").removeClass("fixed"),_(".image-cart .voozzle .container:first-child, .image-cart .voozzle .container:last-of-type").hide()):(_(".image-cart .voozzle .image").addClass("fixed"),_(".image-cart .voozzle .container:first-child, .image-cart .voozzle .container:last-of-type").show("flex")),_(".image-cart .voozzle").addClass("scrolled"),800<doc_width?_(".image-cart .voozzle").css("left",`${50-a}%`):_(".image-cart .voozzle").css("left",`${-a}%`)}}800>window.innerWidth&&b>posBottom_s2-1&&b<posBottom_s2+header_height&&(a(),_("#contact .sticky").addClass("fixed")),800<doc_width&&b>posBottom_s2&&(a(),_("#projects .sticky").addClass("bottom"),_(".bottom").css("max-height",`${window_height}px`),b<posBottom_s2+header_height&&_(".image-cart .voozzle").addClass("scrolled"))};
